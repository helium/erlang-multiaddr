sudo: false

language: erlang

before_install:
  - pip install --user cpp-coveralls coveralls-merge

install:
  - ./rebar3 get-deps

script: ./rebar3 compile xref && ./rebar3 skip_deps=true eunit

otp_release:
  - 20.1

after_success:
  - coveralls --exclude lib --exclude tests --gcov-options '\-lp' --dump c.json
  - coveralls-merge c.json erlang.json
